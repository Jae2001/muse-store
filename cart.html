<script>
  let cart = JSON.parse(localStorage.getItem("cart")) || [];
  const cartDiv = document.getElementById("cart-list");
  let total = 0;

  function renderCart() {
    cartDiv.innerHTML = ""; // 清空旧内容
    total = 0;

    if (cart.length === 0) {
      cartDiv.innerHTML = "<p>购物车为空</p>";
      document.getElementById("total-price").innerText = "";
    } else {
      cart.forEach((item, index) => {
        cartDiv.innerHTML += `
          <div style="margin-bottom: 10px;">
            ${item.name} - RM${item.price.toFixed(2)} 
            <button onclick="removeItem(${index})">❌ 删除</button>
          </div>
        `;
        total += item.price;
      });

      document.getElementById("total-price").innerText = `总金额：RM${total.toFixed(2)}`;
    }
  }

  function removeItem(index) {
    cart.splice(index, 1); // 删除指定商品
    localStorage.setItem("cart", JSON.stringify(cart)); // 更新 localStorage
    renderCart(); // 重新渲染
  }

  renderCart(); // 初始加载
</script>
